echo "ğŸ” Running pre-commit checks..."

# Run prettier on staged files only (fast)
echo "ğŸ“ Formatting staged files..."
npx lint-staged || {
  echo "âŒ Formatting failed."
  exit 1
}

# Run TypeScript type checking (fast - no emit)
echo "ğŸ”§ Running TypeScript type check..."
npx tsc --noEmit || {
  echo "âŒ TypeScript type check failed."
  exit 1
}

# Run tests (can be slow, but necessary)
echo "ğŸ§ª Running tests..."
CI=true npm test -- --run --passWithNoTests || {
  echo "âŒ Tests failed."
  exit 1
}

echo "âœ… All pre-commit checks passed!"
